<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>2026 麻將戰報 Pro</title>
    
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="2026麻將戰報">
    <link rel="apple-touch-icon" href="mahjong.png">
    <meta name="theme-color" content="#059669">
    
    <link rel="manifest" href="manifest.json">

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* ... 你原本的所有 CSS 樣式 (保持不變) ... */
        @import url('https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@400;600;700;900&family=Noto+Sans+TC:wght@400;700;900&display=swap');
        body { font-family: 'SF Pro Display', 'Noto Sans TC', sans-serif; -webkit-tap-highlight-color: transparent; background-color: #f1f5f9; color: #0f172a; margin: 0; padding: 0; overflow-x: hidden; }
        .calendar-wrapper { display: grid; grid-template-columns: repeat(7, 1fr); width: 100%; background-color: #f1f5f9; gap: 1px; }
        .calendar-day { background-color: white; min-height: 65px; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; padding-top: 8px; position: relative; min-width: 0; transition: background-color 0.2s; }
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
        input[type="date"]::-webkit-inner-spin-button, input[type="date"]::-webkit-calendar-picker-indicator { display: none; -webkit-appearance: none; }
        .modal-animate { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes slideUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .blur-header { backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); background-color: rgba(255, 255, 255, 0.85); }
        .card-shadow { box-shadow: 0 4px 20px -2px rgba(0, 0, 0, 0.05); }
        .stat-card-gradient { background: linear-gradient(145deg, #ffffff, #f8fafc); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, doc, setDoc, onSnapshot, deleteDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAUPqdwv4iJ6ebrkdKZNcZpwWBXUg2mQsk",
            authDomain: "mahjong-app-8aacb.firebaseapp.com",
            projectId: "mahjong-app-8aacb",
            storageBucket: "mahjong-app-8aacb.firebasestorage.app",
            messagingSenderId: "344119682978",
            appId: "1:344119682978:web:b571898505e28f8dc2b4fb",
            measurementId: "G-410BN7WGZY"
        };

        const app = initializeApp(firebaseConfig);
        window.fb = {
            db: getFirestore(app),
            auth: getAuth(app),
            collection, doc, setDoc, onSnapshot, deleteDoc, signInAnonymously, onAuthStateChanged,
            appId: 'mahjong-2026-v3'
        };
    </script>

    <script type="text/babel">
        /* ... 此處放你原本的所有 React 代碼 (App 元件等) ... */
        const { useState, useEffect, useMemo } = React;
        // (省略重複的代碼以保持簡潔，請直接使用你原本的內容)
        // ... 原本的 const App = () => { ... } ...
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('✅ Service Worker 註冊成功'))
                    .catch(err => console.log('❌ Service Worker 註冊失敗', err));
            });
        }
    </script>
</body>
</html>
